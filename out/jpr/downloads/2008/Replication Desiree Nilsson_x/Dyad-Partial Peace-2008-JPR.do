* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * ** Do-file for replication of results presented in the article "Partial Peace: Rebel Groups Inside and ** Outside of Civil war Settlements", Journal of Peace Research, July 2008. Note that this data should ** only be used for replication purposes. The data used in this article is based on previous versions  ** of the data from the Uppsala Conflict Database, and their data has been updated since the empirical * * research for this article was conducted. The most recent version of the data is available at the    ** homepage of the Uppsala Conflict Data Project (www.ucdp.uu.se).                                     ** * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * ***CREATE LOG**capture log closelog using PartialPeace-Dyad-2008-JPR, replace**SORT DATA BY DYAD YEAR**sort dyadid year**GENERATE & RECODE VARIABLES**generate WPdummy = nowpconrecode WPdummy 2=0 3/max=1generate nowpcon2=nowpcon*nowpcongen signprop =nosig/nowpcongen polity2= polity*politygen logungdp=ln(ungdp)generate anypk = 0recode anypk 0=1 if unpk ==1 recode anypk 0=1 if nonunpk ==1
generate chad=0recode chad 0=1 if conid==9
**IDENTIFYING EACH SPELL OF PEACE**capture drop spellidgen spellid = dyadid * 100 + stratareplace spellid = . if strata == .list dyadid conid year failure strata spellid if dyadid==39drop if strata == .sort spellid yearcapture drop first_year_of_peaceby spellid: egen first_year_of_peace = min(year)list dyadid conid year failure strata spellid first_year_of_peace if dyadid==39**TIME FOR EACH TIME SPELL**gen start_of_segment = yeargen end_of_segment = year+.99list  start_of_segment end_of_segment first_year_of_peace failure strata spellid if dyadid==39**STSET**/* Stsetting used 'gap time' */stset end_of_segment, origin(time first_year_of_peace) enter(time start_of_segment) failure(failure==1) exit(time .)stcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nologlist dyadid year failure strata spellid first_year_of_peace _t if dyadid==66**DESCRIPTIVE STATS**inspect dyadidinspect dyadid if notsigned==0inspect dyadid if notsigned==1summarize _st _d _origin _t _t0summarize exfight1 expa notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk polity polity2 logungdp anypk WPdummy nowpcon2 nosig intensity_conflict conflictduration**MAIN MODEL 1 (In article see Model 1, Table II)**stcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nolog**MAIN MODEL 1 with Weibull**streg notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) dist(weibull) nolog**MAIN MODEL 1 - MORE THAN 2 PARTIES**stcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk if nowpcon>2, cluster(dyadid) strata(strata) nolog
**BIVARIATE MODEL 1**
stcox notsigned, robust cluster(dyadid)
**ADDITIONAL CONTROLS MODEL 1**
*with anypact*stcox notsigned nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nolog*with ungdp*stcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk logungdp, cluster(dyadid) strata(strata) nolog*with polity*stcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk polity, cluster(dyadid) strata(strata) nolog*with polity polity2*stcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk polity polity2, cluster(dyadid) strata(strata) nolog*with anypk*stcox notsigned nowpcon dyadduration intensity_dyad incomp anypk, cluster(dyadid) strata(strata) nolog*with WPdummy*stcox notsigned WPdummy dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nolog*with nowpcon2*stcox notsigned nowpcon nowpcon2 dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nolog*with nosig*stcox notsigned nowpcon nosig dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nolog*with conflict intensity*stcox notsigned nowpcon dyadduration intensity_conflict incomp unpk nonunpk, cluster(dyadid) strata(strata) nolog*with conflict duration*stcox notsigned nowpcon conflictduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nolog**CLUSTERING MODEL 1, Conflict & Country**stcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk, cluster(conid) strata(strata) nologstcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk, cluster(country) strata(strata) nolog**SCHOENFELDT TEST OF PROPORTIONALITY ASSUMPTION - MODEL 1**
capture drop sch* sca*stcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) scaledsch(sca*) schoenfeld(sch*) nohrstphtest, rank detail**Solving the PH problem***create new varaible and include in previous model*gen nowpcont=nowpcon*ln(_t)
capture drop sch* sca*stcox notsigned nowpcon nowpcont dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) scaledsch(sca*) schoenfeld(sch*) nohrstphtest, rank detail**compare old and new model**stcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nologstcox notsigned nowpcon nowpcont dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nolog**CONTROLLING FOR INFLUENTIAL CASES - MODEL 1**
stcox notsigned chad nowpcon dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nolog**OUTLIERS MODEL 1**
capture drop mgcapture drop dev xbcapture drop xbstcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) mgale(mg) nohr nolog*store the data in double format*
predict double xb, xbscatter mg xbpredict double dev, deviancescatter dev xbscatter dev xb if dev>2, mlabel(dyadid)scatter dev xb if dev<-1, mlabel(dyadid)
**models without: 17, 60, 80, 86, 110 - 22, 119,50, 38, 53
stcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nologstcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=17, cluster(dyadid) strata(strata) nologstcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=60, cluster(dyadid) strata(strata) nologstcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=80, cluster(dyadid) strata(strata) nologstcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=86, cluster(dyadid) strata(strata) nologstcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=110, cluster(dyadid) strata(strata) nologstcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=22, cluster(dyadid) strata(strata) nologstcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=119, cluster(dyadid) strata(strata) nologstcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=50, cluster(dyadid) strata(strata) nologstcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=38, cluster(dyadid) strata(strata) nologstcox notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=53, cluster(dyadid) strata(strata) nolog***CLARIFY***MAIN MODEL - ALL***streg notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) dist(weibull) nologweibull  _t notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk, dead(failure) t0(_t0) cluster (dyadid) hrestsimp weibull  _t notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk, dead(failure) t0(_t0) cluster (dyadid) hrlist dyadid year failure _t0 _t if dyadid==39setx notsigned min nowpcon median dyadduration median intensity_dyad median incomp median unpk median nonunpk mediansimqi, evsetx notsigned max nowpcon median dyadduration median intensity_dyad median incomp median unpk median nonunpk mediansimqi, evdrop  b1 b2 b3 b4 b5 b6 b7 b8 b9***CLARIFY***MAIN MODEL - ONLY PARTIAL***streg notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk if expa2==1, cluster(dyadid) dist(weibull) nologweibull  _t notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk if expa2==1, dead(failure) t0(_t0) cluster (dyadid) hrestsimp weibull _t notsigned nowpcon dyadduration intensity_dyad incomp unpk nonunpk if expa2==1, dead(failure) t0(_t0) cluster (dyadid) hrsetx notsigned min nowpcon median dyadduration median intensity_dyad median incomp median unpk median nonunpk mediansimqi, evsetx notsigned max nowpcon median dyadduration median intensity_dyad median incomp median unpk median nonunpk mediansimqi, ev********************************************************************************************************************ESTIMATE MODELS WITH ONLY SIGNATORIES**drop if notsigned==1
**MAIN MODEL 2 & 3 Ð (In article see Model 2 & 3, Table II)**stcox expa nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nolog**MAIN MODEL 2 & 3 Ð weibull **streg expa nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) dist(weibull) nologstreg exfight1 nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) dist(weibull) nolog**MAIN MODEL 2 & 3 - MORE THAN 2 PARTIES**stcox expa nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk if nowpcon>2, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk if nowpcon>2, cluster(dyadid) strata(strata) nolog**BIVARIATE MODEL 2 & 3**
stcox expa, robust cluster(dyadid)stcox exfight1, robust cluster(dyadid)**ADDITIONAL CONTROLS - MODEL 2 & 3***main models*stcox expa nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nolog*with ungdp*stcox expa nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk logungdp, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk logungdp, cluster(dyadid) strata(strata) nolog*with polity*stcox expa nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk polity, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk polity, cluster(dyadid) strata(strata) nolog*with polity polity2*stcox expa nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk polity polity2, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk polity polity2, cluster(dyadid) strata(strata) nolog*with anypk*stcox expa nowpcon dyadduration intensity_dyad incomp anypk, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon dyadduration intensity_dyad incomp anypk, cluster(dyadid) strata(strata) nolog*with WPdummy*stcox expa WPdummy dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nologstcox exfight1 WPdummy dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nolog*with nowpcon2*stcox expa nowpcon nowpcon2 dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon nowpcon2 dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nolog*with nosig*stcox expa nowpcon nosig dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon nosig dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nolog*with conflict intensity*stcox expa nowpcon anypact dyadduration intensity_conflict incomp unpk nonunpk, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon anypact dyadduration intensity_conflict incomp unpk nonunpk, cluster(dyadid) strata(strata) nolog*with conflict duration*stcox expa nowpcon anypact conflictduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon anypact conflictduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nolog**CLUSTERING, Conflict & Country**stcox expa nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(conid) strata(strata) nologstcox exfight1 nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(conid) strata(strata) nologstcox expa nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(country) strata(strata) nologstcox exfight1 nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(country) strata(strata) nolog**SCHOENFELDT TEST OF PROPORTIONALITY ASSUMPTION-BASIC MODELS**capture drop sch* sca*stcox expa nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) scaledsch(sca*) schoenfeld(sch*) nohrstphtest, rank detailcapture drop sch* sca*stcox exfight1 nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) scaledsch(sca*) schoenfeld(sch*) nohrstphtest, rank detail** Solving the PH problem***create new variable and include in previous model**gen nowpcont=nowpcon*ln(_t)*stcox expa nowpcon nowpcont anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon nowpcont anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nolog**Test to see that new model not violates PH-assumption**capture drop sch* sca*stcox expa nowpcon nowpcont anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) scaledsch(sca*) schoenfeld(sch*) nohrstphtest, rank detailcapture drop sch* sca*stcox exfight1 nowpcon nowpcont anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) scaledsch(sca*) schoenfeld(sch*) nohrstphtest, rank detail**Comparing old and corrected models**stcox expa nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nologstcox expa nowpcon nowpcont anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon nowpcont anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nolog**CONTROLLING FOR INFLUENTIAL CASES** 
stcox expa chad nowpcon dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nologstcox exfight1 chad nowpcon dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nolog
**OUTLIERS MODEL 2**capture drop mgcapture drop dev xbcapture drop xbstcox expa nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) mgale(mg) nohr nolog*store the data in double format*predict double xb, xbscatter mg xbpredict double dev, deviancescatter dev xbscatter dev xb if dev>2, mlabel(dyadid)scatter dev xb if dev<-1, mlabel(dyadid)**models without: 17, 60, 80, 83, 110* 40, 69**
stcox expa nowpcon dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nologstcox expa nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=17, cluster(dyadid) strata(strata) nologstcox expa nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=60, cluster(dyadid) strata(strata) nologstcox expa nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=80, cluster(dyadid) strata(strata) nologstcox expa nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=83, cluster(dyadid) strata(strata) nologstcox expa nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=110, cluster(dyadid) strata(strata) nologstcox expa nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=40, cluster(dyadid) strata(strata) nologstcox expa nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=69, cluster(dyadid) strata(strata) nolog
**OUTLIERS MODEL 3**
capture drop mgcapture drop dev xbcapture drop xbstcox exfight1 nowpcon anypact dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) mgale(mg) nohr nolog
*store the data in double format*predict double xb, xbscatter mg xbpredict double dev, deviancescatter dev xbscatter dev xb if dev>2, mlabel(dyadid)scatter dev xb if dev<-1, mlabel(dyadid)**models without: 17, 60, 80, 83, 110* 40, 69**
stcox exfight1 nowpcon dyadduration intensity_dyad incomp unpk nonunpk, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=17, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=60, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=80, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=83, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=110, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=38, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=27, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=40, cluster(dyadid) strata(strata) nologstcox exfight1 nowpcon dyadduration intensity_dyad incomp unpk nonunpk if dyadid!=69, cluster(dyadid) strata(strata) nolog
********************************